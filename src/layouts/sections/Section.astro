---
import type { HTMLAttributes } from 'astro/types'
import layouts from './layouts.module.scss'
import Block from './Block.astro'

interface Props extends Omit<component.Props_<typeof Block>, 'el'> {
	layout?: keyof typeof layouts
	'wrapper-attr'?: HTMLAttributes<'div'>
}

var { layout, 'wrapper-attr': wrapAttr, ...props } = Astro.props
wrapAttr ||= {}
---

<div {...wrapAttr} class:list={[wrapAttr['class'], layout && layouts[layout]]}>
	{
		Astro.slots.has('back') && (
			<div class="back">
				<slot name="back" />
			</div>
		)
	}
	<Block {...props} el="section">
		<slot />
	</Block>
</div>

<style lang="scss">
	@use '@/styles/layout.module.scss';

	.back {
		position: absolute;
		top: 0;
		left: 0;
		z-index: -1;
		width: 100%;
		height: 100%;

		:global(> *) {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
	}

	div:not(.back) {
		display: flex;
		position: relative;
		justify-content: center;
	}
</style>
